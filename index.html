<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ICT Training Registration</title>
<script src="https://www.gstatic.com/firebasejs/10.5.2/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.5.2/firebase-auth.js"></script>
</head>
<body>
<h2>ICT Training Registration</h2>

<form id="registrationForm">
<label>Surname:</label>
<input type="text" id="surname" required><br>

<label>First Name:</label>
<input type="text" id="firstName" required><br>

<label>WhatsApp Number:</label>
<input type="text" id="phone" required><br>

<label>Occupation:</label>
<input type="text" id="occupation" required><br>

<label>Gender:</label>
<select id="gender" required>
<option value="">Select</option>
<option value="Male">Male</option>
<option value="Female">Female</option>
</select><br>

<label>Email:</label>
<input type="email" id="email" required><br>

<label>LGA Area Origin:</label>
<input type="text" id="lga" required><br>

<label>Will you pursue a career in ICT?</label>
<select id="career" required>
<option value="">Select</option>
<option value="Yes">Yes</option>
<option value="No">No</option>
</select><br>

<label>Passport Photograph:</label>
<input type="file" id="passport" accept="image/*" required><br>

<div id="recaptcha-container"></div>

<button type="button" onclick="sendOTP()">Send OTP</button>
<input type="text" id="otp" placeholder="Enter OTP" required>
<button type="button" onclick="verifyOTP()">Verify OTP</button>

<button type="submit" disabled id="registerBtn">Register</button>
</form>

<script>
        const firebaseConfig = {
            apiKey: "AIzaSyBojNY26oE7u6CiBeUwGEvcimCNdU7CsUQ",
            authDomain: "ict-training-registration.firebaseapp.com",
            projectId: "ict-training-registration",
            storageBucket: "ict-training-registration.firebasestorage.app",
            messagingSenderId: "145482288886",
            appId: "1:145482288886:web:6b22982057332d2da5e6d7"
        };

        firebase.initializeApp(firebaseConfig);

        let phoneNumber;
        let confirmationResult;

        function sendOTP() {
            phoneNumber = document.getElementById("phone").value;
            if (phoneNumber.length < 10) {
                alert("Enter a valid phone number!");
                return;
            }

            window.recaptchaVerifier = new firebase.auth.RecaptchaVerifier('recaptcha-container', {
'size': 'invisible'
            });

            firebase.auth().signInWithPhoneNumber(phoneNumber, window.recaptchaVerifier)
                .then((result) => {
                    confirmationResult = result;
                    alert("OTP sent successfully!");
                }).catch((error) => {
                    alert("Error sending OTP: " + error.message);
                });
        }

        function verifyOTP() {
            const otp = document.getElementById("otp").value;
            if (!otp) {
                alert("Enter OTP to proceed!");
                return;
            }

            confirmationResult.confirm(otp).then(() => {
                alert("OTP verified successfully!");
                document.getElementById("registerBtn").disabled = false;
            }).catch((error) => {
                alert("Invalid OTP: " + error.message);
            });
        }

        document.getElementById("registrationForm").onsubmit = function (event) {
            event.preventDefault();

            const userDetails = {
                surname: document.getElementById("surname").value,
                firstName: document.getElementById("firstName").value,
                phone: document.getElementById("phone").value,
                occupation: document.getElementById("occupation").value,
                gender: document.getElementById("gender").value,
                email: document.getElementById("email").value,
                lga: document.getElementById("lga").value,
                career: document.getElementById("career").value
            };

            localStorage.setItem("userDetails", JSON.stringify(userDetails));

            window.location.href = "confirmation.html";
        };
</script>
</body>
</html>
